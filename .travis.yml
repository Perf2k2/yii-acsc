language: php

php:
  - '5.4'
  - '5.5'
  - '5.6'
  - '7.0'
  - hhvm
  - nightly

script:
  - composer global require "fxp/composer-asset-plugin:~1.1.1"
  - composer create-project --prefer-dist yiisoft/yii2-app-basic ./tests/app
  - composer require satooshi/php-coveralls '~1.0'
  - mkdir -p build/logs
  - phpunit --coverage-clover build/logs/clover.xml --bootstrap ./tests/bootstrap.php ./tests/src

after_success:
  - travis_retry php vendor/bin/coveralls